<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.is.main.coment.ComentDAO">
  <select id="getComentTotal" resultType="Long" parameterType="ComentDTO">
  	SELECT COUNT(COMENTNUM) FROM COMENT
  	WHERE BOOKNUM = #{bookNum}
  </select>
  
  <select id="getComentList" resultType="ComentDTO" parameterType="Map">
  	SELECT * FROM
  	(SELECT ROWNUM R,C.* FROM
  	(SELECT * FROM 
  	WHERE BOOKNUM=#{coment.bookNum}
  	COMENT ORDER BY COMENTNUM DESC)c)
	WHERE R BETWEEN #{pager.startRow} AND #{pager.lastRow}
  </select>
  
  
  </mapper>